set(LINKER_SCRIPT @CMAKE_INSTALL_PREFIX@/etc/etiss.ld)

# this macro adds custom linker arguments to compile an executable for etiss
MACRO(add_executable_etiss target)
    set(src_files "${ARGN}")
    
    add_executable(${target} ${src_files})
    
    # this will cause a relinking if any of the listed files change
    set_target_properties(${target} PROPERTIES LINK_DEPENDS 
        "${LINKER_SCRIPT}"
    )
    target_link_options(${target} BEFORE PRIVATE
        -T ${LINKER_SCRIPT}
    )
ENDMACRO()
